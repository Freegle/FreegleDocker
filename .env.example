# Branch configuration for Freegle components
# Copy this file to .env and modify as needed

# Docker Compose configuration
COMPOSE_BAKE=true

# Docker Compose Profiles - controls which services start
# Every service has a profile; COMPOSE_PROFILES must be set or nothing starts.
#
# Available profiles:
#   frontend  - Web-facing APIs: apiv1, apiv2, delivery, tusd, redis, beanstalkd
#   backend   - Background processing: loki, mjml, redis, rspamd, spamassassin, ai-support-helper
#   production - Production batch jobs: batch-prod (requires .env.background)
#   mail      - Incoming mail: postfix (requires MX records)
#   database  - Local databases: percona (MySQL), postgres (PostGIS)
#   dev       - Development tools: Traefik, status page, dev/prod-local containers, mailpit, phpmyadmin, batch, tests, MCP tools
#   monitoring - Log shipping: alloy
#   build     - Base image build only
#   dev-live  - Dev containers with production APIs (use with caution)
#   prod-live - apiv2-live with production database tunnel
#   backup    - Loki backup job
#
# Scenario presets:
#   Local dev:      frontend,database,backend,dev,monitoring
#   Live backend:   backend,production,mail
#   Live frontend:  frontend
#   Yesterday:      frontend,database,backend,dev,monitoring (+ override file)
#   CircleCI:       frontend,database,backend,dev,monitoring
COMPOSE_PROFILES=frontend,database,backend,dev,monitoring

# Max containers to start in parallel. Lower values reduce memory spikes on constrained systems (e.g. WSL2).
# Default is unlimited (-1). Uncomment and set to e.g. 4 to stagger startup.
#COMPOSE_PARALLEL_LIMIT=-1

# PHP API Server (iznik-server)
IZNIK_SERVER_BRANCH=master

# Go API Server (iznik-server-go) 
IZNIK_SERVER_GO_BRANCH=master

# User Website (iznik-nuxt3)
IZNIK_NUXT3_BRANCH=master

# ModTools (iznik-nuxt3-modtools)
IZNIK_NUXT3_MODTOOLS_BRANCH=master

# API Key configuration for Google and Mapbox services
# These keys are used for both application functionality and PHPUnit testing
# Replace with your actual API keys
GOOGLE_CLIENT_ID=your_google_client_id_here.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your_google_client_secret_here
GOOGLE_PUSH_KEY=your_google_push_key_here
GOOGLE_VISION_KEY=your_google_vision_api_key_here
GOOGLE_PERSPECTIVE_KEY=your_google_perspective_api_key_here
GOOGLE_GEMINI_API_KEY=your_google_gemini_api_key_here
GOOGLE_PROJECT=your_google_project_id_here
GOOGLE_APP_NAME=Freegle
MAPBOX_KEY=your_mapbox_api_key_here
MAXMIND_ACCOUNT=your_maxmind_account_here
MAXMIND_KEY=your_maxmind_key_here

# Code coverage reporting
# For Coveralls.io coverage reporting - get from https://coveralls.io/repos
COVERALLS_REPO_TOKEN=your_coveralls_repo_token_here

# MySQL Database Configuration
# For Yesterday restores: Production database root password from the backup
# For local development: Use "iznik" (the default dev password)
MYSQL_PRODUCTION_ROOT_PASSWORD=iznik

# Sentry Integration (Optional - for automated error fixing with Claude Code CLI)
# See SENTRY-INTEGRATION.md for setup instructions
# Requires 'claude' CLI to be installed and configured
# Get Sentry token at: https://sentry.io/settings/account/api/auth-tokens/
SENTRY_AUTH_TOKEN=your-sentry-auth-token-here

# Sentry Organization Slug (Optional - defaults to o118493)
SENTRY_ORG_SLUG=o118493

# Sentry Poll Interval in milliseconds (Optional - defaults to 900000 = 15 minutes)
SENTRY_POLL_INTERVAL_MS=900000

# SQLite database path for tracking processed issues (Optional - defaults to /project/sentry-issues.db)
SENTRY_DB_PATH=/project/sentry-issues.db

# Sentry Project Configuration (Optional - defaults provided)
# Format: key:projectId:projectSlug:repoPath,key:projectId:projectSlug:repoPath,...
# Leave commented to use defaults for Freegle projects
# SENTRY_PROJECTS=php:6119406:php-api:/project/iznik-server,go:4505568012730368:go-api:/project/iznik-server-go,nuxt3:4504083802226688:iznik-nuxt3:/project/iznik-nuxt3,capacitor:4506643536609280:iznik-nuxt3-capacitor:/project/iznik-nuxt3,modtools:4506712427855872:iznik-nuxt3-modtools:/project/iznik-nuxt3-modtools