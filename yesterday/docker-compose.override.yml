# Override for Yesterday environment
# This configures containers to use production image services
# so restored backups show the correct images from production

services:
  percona:
    volumes:
      - /tmp/percona-my.cnf:/etc/my.cnf:ro

  apiv1:
    volumes:
      - ./iznik-server-my.cnf:/root/.my.cnf:ro
    environment:
      - TUS_UPLOADER=https://tus.ilovefreegle.org/tus/
      - IMAGE_DELIVERY=https://images.ilovefreegle.org

  apiv2:
    environment:
      - IMAGE_DELIVERY=https://images.ilovefreegle.org
      - TUS_UPLOADER=https://tus.ilovefreegle.org/tus/

  freegle-dev:
    environment:
      - IMAGE_DELIVERY=https://images.ilovefreegle.org
      - TUS_UPLOADER=https://tus.ilovefreegle.org/tus/
      - IMAGE_BASE_URL=https://tus.ilovefreegle.org/tus

  freegle-prod:
    environment:
      - IMAGE_DELIVERY=https://images.ilovefreegle.org
      - TUS_UPLOADER=https://tus.ilovefreegle.org/tus/
      - IMAGE_BASE_URL=https://tus.ilovefreegle.org/tus

  modtools-dev:
    environment:
      - IMAGE_DELIVERY=https://images.ilovefreegle.org
      - TUS_UPLOADER=https://tus.ilovefreegle.org/tus/
      - IMAGE_BASE_URL=https://tus.ilovefreegle.org/tus

  modtools-prod:
    environment:
      - IMAGE_DELIVERY=https://images.ilovefreegle.org
      - TUS_UPLOADER=https://tus.ilovefreegle.org/tus/
      - IMAGE_BASE_URL=https://tus.ilovefreegle.org/tus

volumes:
  freegle_db:
    external: true
